accelerator:
  displayName: TAP Installation Configuration
  description: Generates a TAP installation configuration file
  iconUrl: https://raw.githubusercontent.com/simple-starters/icons/master/icon-tanzu-light.png
  tags: []

  options:
  - name: profile
    label: Installation Profile
    inputType: radio
    choices:
    - text: Full
      value: full
    - text: Light
      value: light
    defaultValue: light

  - name: tanzunetUsername
    label: Tanzu Network Username
    inputType: text
    defaultValue: '<TanzuNet username>'
    description: 'Your username for https://network.tanzu.vmware.com'

  - name: tanzunetPassword
    label: Tanzu Network Password
    inputType: text
    defaultValue: '<TanzuNet password>'
    description: |
      Your password for https://network.tanzu.vmware.com.
      Keep the default placeholder and replace it later
      in the generated files for better security.
  
  - name: registryType
    label: Container Registry Type
    description: |
      The registry type that will be used for images generated by the
      Build Service.
    inputType: select
    choices:
    - text: DockerHub
      value: dockerhub
    - text: Google Container Registry (GCR)
      value: gcr
    - text: Private Registry (e.g. Harbor)
      value: private
    
  - name: registryUsername
    label: Registry Username
    description: |
      The user account for the registry.
      For GCR this value will be ignored.
    inputType: text
    defaultValue: '<Registry Username>'
  
  - name: registryPassword
    label: Registry Password
    description: |
      The password for the registry.
      For GCR this value will be ignored.
    inputType: text
    defaultValue: '<Registry Password>'

  - name: registryGcrKey
    label: GCR Service Account Key JSON
    description: |
      Enter the contents of a suitably authorised service account
      key file (JSON format).
    inputType: textarea
    dependsOn:
      name: registryType
      value: gcr

  - name: registryServer
    description: |
      The registry server host.
      For a private registry 'myrepo.com/project/sub-project' this
      would be 'myrepo.com'.
    inputType: text
    dependsOn:
      name: registryType
      value: private

  - name: registryProject
    label: Registry Project
    description: |
      The registry 'project' component. For DockerHub this will
      probably be your username.
      For other registries it might be a sub-path within the registry.

  - name: tbsAdvanced
    label: Configure advanced TBS settings
    description: Show options to configure less frequently-used settings
    display: true
    inputType: checkbox
    dataType: boolean
    defaultValue: false

  - name: tbsCaCert
    label: TBS CA Certificate
    description: 
    inputType: textarea
    dependsOn:
      name: tbsAdvanced

  - name: tbsEnableUpdates
    label: Enable Dependency Ppdates
    description: Allow automatic import of new dependency updates from Tanzunet
    dependsOn:
      name: tbsAdvanced
    inputType: checkbox
    dataType: boolean
    defaultValue: false

  - name: tbsDescriptorName
    label: Descriptor Name
    description: |
      Name of descriptor to import, e.g. tap-1.0.0-full or tap-1.0.0-lite
    inputType: text
    dependsOn:
      name: tbsEnableUpdates

  - name: tbsDescriptorVersion
    label: Descriptor Version
    description: |
      Version of descriptor to use during install. This
      will override the version installed by default.
    inputType: text
    dependsOn:
      name: tbsEnableUpdates

engine:
  include:
  - '**'
